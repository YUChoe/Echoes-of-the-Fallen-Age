# 실시간 전투 UI 표시 시스템 요구사항

## 소개

현재 자동 전투 시스템은 서버에서 정상적으로 작동하지만, 전투 진행 상황이 클라이언트 화면에 실시간으로 표시되지 않는 문제가 있습니다. 플레이어가 전투 상황을 실시간으로 확인할 수 있도록 클라이언트-서버 간 메시지 전송 및 UI 업데이트 시스템을 개선해야 합니다.

## 요구사항

### 요구사항 1: 실시간 전투 메시지 전송

**사용자 스토리:** 플레이어로서, 전투가 진행될 때 각 턴의 결과를 실시간으로 확인하고 싶습니다.

#### 수락 기준
1. WHEN 전투가 시작되면 THEN 서버는 전투 시작 메시지를 모든 방 참여자에게 브로드캐스트해야 합니다
2. WHEN 각 턴이 처리되면 THEN 서버는 턴 결과 메시지를 실시간으로 전송해야 합니다
3. WHEN 전투가 종료되면 THEN 서버는 전투 결과 메시지를 브로드캐스트해야 합니다
4. IF 플레이어가 전투 명령어를 입력하면 THEN 해당 액션이 즉시 전투 시스템에 반영되어야 합니다

### 요구사항 2: 클라이언트 전투 메시지 처리

**사용자 스토리:** 플레이어로서, 전투 메시지가 게임 화면에 명확하게 구분되어 표시되기를 원합니다.

#### 수락 기준
1. WHEN 전투 관련 메시지를 수신하면 THEN 클라이언트는 해당 메시지를 전투 전용 스타일로 표시해야 합니다
2. WHEN 전투 상태 정보를 수신하면 THEN HP, 턴 정보 등이 실시간으로 업데이트되어야 합니다
3. WHEN 전투 중이면 THEN 전투 관련 액션 버튼이 활성화되어야 합니다
4. IF 전투가 종료되면 THEN 전투 UI 요소들이 비활성화되어야 합니다

### 요구사항 3: 전투 상태 실시간 동기화

**사용자 스토리:** 플레이어로서, 현재 전투 상황(HP, 턴 순서, 남은 시간 등)을 실시간으로 확인하고 싶습니다.

#### 수락 기준
1. WHEN 전투가 진행 중이면 THEN 플레이어와 몬스터의 HP가 실시간으로 표시되어야 합니다
2. WHEN 턴이 바뀌면 THEN 현재 턴 플레이어가 명확히 표시되어야 합니다
3. WHEN 플레이어 턴이면 THEN 액션 선택 시간이 카운트다운으로 표시되어야 합니다
4. IF 전투 로그가 업데이트되면 THEN 최신 전투 기록이 화면에 표시되어야 합니다

### 요구사항 4: 전투 명령어 즉시 반영

**사용자 스토리:** 플레이어로서, 전투 중 입력한 명령어(attack, defend, flee)가 즉시 반영되기를 원합니다.

#### 수락 기준
1. WHEN 플레이어가 attack 명령어를 입력하면 THEN 해당 액션이 즉시 전투 시스템에 등록되어야 합니다
2. WHEN 플레이어가 defend 명령어를 입력하면 THEN 방어 액션이 즉시 적용되어야 합니다
3. WHEN 플레이어가 flee 명령어를 입력하면 THEN 도망 시도가 즉시 처리되어야 합니다
4. IF 플레이어가 잘못된 명령어를 입력하면 THEN 적절한 오류 메시지가 표시되어야 합니다

### 요구사항 5: 전투 UI 개선

**사용자 스토리:** 플레이어로서, 전투 상황을 한눈에 파악할 수 있는 직관적인 UI를 원합니다.

#### 수락 기준
1. WHEN 전투가 시작되면 THEN 전투 전용 UI 패널이 표시되어야 합니다
2. WHEN HP가 변경되면 THEN HP 바가 애니메이션과 함께 업데이트되어야 합니다
3. WHEN 크리티컬 히트가 발생하면 THEN 특별한 시각적 효과가 표시되어야 합니다
4. IF 전투가 종료되면 THEN 전투 결과가 명확하게 표시되어야 합니다

### 요구사항 6: 메시지 타입 구분

**사용자 스토리:** 개발자로서, 전투 메시지와 일반 게임 메시지를 구분하여 처리하고 싶습니다.

#### 수락 기준
1. WHEN 서버에서 전투 메시지를 전송할 때 THEN 메시지 타입이 'combat_message'로 설정되어야 합니다
2. WHEN 전투 상태 정보를 전송할 때 THEN 메시지 타입이 'combat_status'로 설정되어야 합니다
3. WHEN 전투 시작/종료 시 THEN 메시지 타입이 'combat_event'로 설정되어야 합니다
4. IF 클라이언트에서 메시지를 수신하면 THEN 타입에 따라 적절한 핸들러가 호출되어야 합니다