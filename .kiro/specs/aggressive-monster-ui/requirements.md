# 선공형 몬스터 UI 표시 시스템 요구사항

## 소개

선공형 몬스터 시스템이 서버와 브라우저 콘솔에서는 정상 작동하지만, 실제 게임 UI에는 표시되지 않는 문제를 해결하는 기능입니다. 플레이어가 방에 입장했을 때 선공형 몬스터의 자동 공격 메시지가 게임 화면에 명확하게 표시되어야 합니다.

## 요구사항

### 요구사항 1: 선공형 몬스터 공격 메시지 UI 표시

**사용자 스토리:** 플레이어로서, 방에 입장했을 때 선공형 몬스터가 나를 공격하면 게임 화면에서 공격 메시지를 즉시 볼 수 있기를 원한다.

#### 수락 기준

1. WHEN 플레이어가 선공형 몬스터가 있는 방에 입장 THEN 시스템은 monster_aggro 메시지를 UI에 표시해야 한다
2. WHEN monster_aggro 메시지가 수신되면 THEN 게임 메시지 영역에 "몬스터가 당신을 공격합니다!" 형태의 메시지가 표시되어야 한다
3. WHEN 선공형 몬스터 공격이 발생하면 THEN 메시지는 경고 스타일(빨간색 또는 주황색)로 표시되어야 한다

### 요구사항 2: 메시지 핸들러 라우팅 수정

**사용자 스토리:** 개발자로서, monster_aggro 메시지가 올바른 핸들러로 라우팅되어 UI에 표시되기를 원한다.

#### 수락 기준

1. WHEN monster_aggro 메시지가 WebSocket으로 수신되면 THEN MessageHandler가 이를 적절한 핸들러로 라우팅해야 한다
2. WHEN 메시지 타입이 monster_aggro이면 THEN GameModule의 handleMonsterAggro 메서드가 호출되어야 한다
3. IF handleMonsterAggro 메서드가 존재하지 않으면 THEN 기본 메시지 표시 로직을 사용해야 한다

### 요구사항 3: 브라우저 콘솔과 UI 동기화

**사용자 스토리:** 개발자로서, 브라우저 콘솔에서 확인되는 메시지가 실제 UI에도 동일하게 표시되기를 원한다.

#### 수락 기준

1. WHEN 브라우저 콘솔에 monster_aggro 메시지가 로깅되면 THEN 동시에 UI에도 해당 메시지가 표시되어야 한다
2. WHEN 메시지 처리 과정에서 오류가 발생하면 THEN 콘솔에 오류 로그가 출력되어야 한다
3. WHEN UI 표시가 실패하면 THEN 대체 메시지 표시 방법이 작동해야 한다

### 요구사항 4: 실시간 테스트 검증

**사용자 스토리:** 테스터로서, forest_7_7에 입장했을 때 선공형 몬스터(야생 고블린)의 공격 메시지가 즉시 화면에 표시되는 것을 확인할 수 있기를 원한다.

#### 수락 기준

1. WHEN 테스터가 goto forest_7_7 명령을 실행하면 THEN 야생 고블린의 공격 메시지가 3초 이내에 UI에 표시되어야 한다
2. WHEN 선공형 몬스터 공격이 발생하면 THEN 자동으로 전투 상태로 전환되어야 한다
3. WHEN 전투가 시작되면 THEN 전투 UI가 활성화되고 전투 진행 상황이 표시되어야 한다